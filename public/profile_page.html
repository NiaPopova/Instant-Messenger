<!DOCTYPE html>
<html>
<head><title>User Profile</title></head>
<body>
  <h1>User Profile</h1>
  <div id="profile"></div>
  <button onclick="logout()">Logout</button>

  <script>
    async function loadProfile() {
      const username = localStorage.getItem('username');
      
      if (!username) {
        document.getElementById('profile').innerText = "No user logged in!";
        return;
      }
    
      const res = await fetch('/auth/profile/' + username);
      const user = await res.json();
    
      if (res.ok) {
        document.getElementById('profile').innerHTML = `
          <h2>Welcome, ${user.username}!</h2>
        `;
      } else {
        document.getElementById('profile').innerText = user.message;
      }
    }

    function logout() {
        localStorage.clear(); 
        window.location.href = "/index.html";
    }
    
    loadProfile();
    </script>    
</body>
</html>